


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Regularization &mdash; SimPEG 0.15.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-rendered-html.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/logo-block.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Optimize" href="api_Optimization.html" />
    <link rel="prev" title="Data Misfit" href="api_DataMisfit.html" />
 

<meta name="description" content="Simulation and Parameter Estimation in Geophysics">
<meta name="author" content="SimPEG Developers">
<meta name="keywords" content="python, geophysics, inversion, electromagnetics, magnetotellurics, magnetics, gravity, DC, flow inverse problems, open source, finite volume">


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45185336-1', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> SimPEG
          

          
          </a>

          
            
            
              <div class="version">
                0.15.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basic/big_picture.html">Why SimPEG?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/contributing.html">Contributing to SimPEG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/installing.html">Getting Started with SimPEG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/getting_started_developers.html">Getting Started: for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/practices.html">Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Gallery</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/01-models_mapping/index.html">Models and Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/02-linear_inversion/index.html">Linear Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/03-gravity/index.html">Gravity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/04-magnetics/index.html">Magnetics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/05-dcr/index.html">Direct Current Resistivity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/06-ip/index.html">Induced Polarization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/07-fdem/index.html">Frequency-Domain Electromagnetics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/08-tdem/index.html">Time-Domain Electromagnetics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/09-nsem/index.html">Natural Source Electromagnetics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/10-vrm/index.html">Viscous Remanent Magnetization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/11-flow/index.html">Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/12-seismic/index.html">Seismic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/13-pgi/index.html">PGI: Petrophysically and Geologically Guided Geophysical Inversion</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Packages</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../em/index.html">Electromagnetics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dc/index.html">Direct Current Resistivity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ip/index.html">Induced Polarization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pf/index.html">Potential Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vrm/index.html">Viscous Remanent Magnetization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flow/index.html">Richards Equation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api_FiniteVolume.html">Finite Volume</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_ForwardProblem.html">Forward Simulation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api_InversionComponents.html">Inversion Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api_DataMisfit.html">Data Misfit</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Regularization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-api">The API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tikhonov-regularization">Tikhonov Regularization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">The API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sparse-regularization">Sparse Regularization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">The API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api_Optimization.html">Optimize</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_Inversion.html">InvProblem</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_Inversion.html#inversion">Inversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_Inversion.html#module-SimPEG.directives">Directives</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_Maps.html">Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_Utilities.html">Utilities</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Meta Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SimPEG</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="api_InversionComponents.html">Inversion Components</a> &raquo;</li>
        
      <li>Regularization</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            <a href="https://github.com/simpeg/simpeg/edit/main/docs/content/api_core/api_Regularization.rst" class="fa fa-github"> Edit on GitHub</a>
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="regularization">
<h1>Regularization<a class="headerlink" href="#regularization" title="Permalink to this headline">¶</a></h1>
<p>If there is one model that has a misfit that equals the desired tolerance,
then there are infinitely many other models which can fit to the same degree.
The challenge is to find that model which has the desired characteristics and
is compatible with a priori information. A single model can be selected from
an infinite ensemble by measuring the length, or norm, of each model. Then a
smallest, or sometimes largest, member can be isolated. Our goal is to design
a norm that embodies our prior knowledge and, when minimized, yields a
realistic candidate for the solution of our problem. The norm can penalize
variation from a reference model, spatial derivatives of the model, or some
combination of these.</p>
<div class="section" id="the-api">
<h2>The API<a class="headerlink" href="#the-api" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">RegularizationMesh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/__init__.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p><strong>Regularization Mesh</strong></p>
<p>This contains the operators used in the regularization. Note that these
are not necessarily true differential operators, but are constructed from
a SimPEG Mesh.</p>
<dl class="field-list simple">
<dt class="field-odd">param discretize.base.BaseMesh mesh</dt>
<dd class="field-odd"><p>problem mesh</p>
</dd>
<dt class="field-even">param numpy.ndarray indActive</dt>
<dd class="field-even"><p>bool array, size nC, that is True where we have active cells. Used to reduce the operators so we regularize only on active cells</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): active indices in mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
</ul>
<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.Pac">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">Pac</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.Pac" title="Permalink to this definition">¶</a></dt>
<dd><p>projection matrix that takes from the reduced space of active cells to
full modelling space (ie. nC x nindActive)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>active cell projection matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.Pafx">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">Pafx</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.Pafx" title="Permalink to this definition">¶</a></dt>
<dd><p>projection matrix that takes from the reduced space of active x-faces
to full modelling space (ie. nFx x nindActive_Fx )</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>active face-x projection matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.Pafy">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">Pafy</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.Pafy" title="Permalink to this definition">¶</a></dt>
<dd><p>projection matrix that takes from the reduced space of active y-faces
to full modelling space (ie. nFy x nindActive_Fy )</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>active face-y projection matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.Pafz">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">Pafz</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.Pafz" title="Permalink to this definition">¶</a></dt>
<dd><p>projection matrix that takes from the reduced space of active z-faces
to full modelling space (ie. nFz x nindActive_Fz )</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>active face-z projection matrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.aveCC2Fx">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">aveCC2Fx</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.aveCC2Fx" title="Permalink to this definition">¶</a></dt>
<dd><p>averaging from active x-faces to active cell centers</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>averaging matrix from active x-faces to active cell centers</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.aveCC2Fy">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">aveCC2Fy</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.aveCC2Fy" title="Permalink to this definition">¶</a></dt>
<dd><p>averaging from active y-faces to active cell centers</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>averaging matrix from active y-faces to active cell centers</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.aveCC2Fz">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">aveCC2Fz</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.aveCC2Fz" title="Permalink to this definition">¶</a></dt>
<dd><p>averaging from active z-faces to active cell centers</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>averaging matrix from active z-faces to active cell centers</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.aveFx2CC">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">aveFx2CC</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.aveFx2CC" title="Permalink to this definition">¶</a></dt>
<dd><p>averaging from active cell centers to active x-faces</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>averaging from active cell centers to active x-faces</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.aveFy2CC">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">aveFy2CC</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.aveFy2CC" title="Permalink to this definition">¶</a></dt>
<dd><p>averaging from active cell centers to active y-faces</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>averaging from active cell centers to active y-faces</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.aveFz2CC">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">aveFz2CC</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.aveFz2CC" title="Permalink to this definition">¶</a></dt>
<dd><p>averaging from active cell centers to active z-faces</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>averaging from active cell centers to active z-faces</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.cellDiffx">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">cellDiffx</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.cellDiffx" title="Permalink to this definition">¶</a></dt>
<dd><p>cell centered difference in the x-direction</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>differencing matrix for active cells in the x-direction</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.cellDiffxStencil">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">cellDiffxStencil</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.cellDiffxStencil" title="Permalink to this definition">¶</a></dt>
<dd><p>cell centered difference stencil (no cell lengths include) in the
x-direction</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>differencing matrix for active cells in the x-direction</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.cellDiffy">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">cellDiffy</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.cellDiffy" title="Permalink to this definition">¶</a></dt>
<dd><p>cell centered difference in the y-direction</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>differencing matrix for active cells in the y-direction</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.cellDiffyStencil">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">cellDiffyStencil</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.cellDiffyStencil" title="Permalink to this definition">¶</a></dt>
<dd><p>cell centered difference stencil (no cell lengths include) in the
y-direction</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>differencing matrix for active cells in the y-direction</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.cellDiffz">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">cellDiffz</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.cellDiffz" title="Permalink to this definition">¶</a></dt>
<dd><p>cell centered difference in the z-direction</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>differencing matrix for active cells in the z-direction</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.cellDiffzStencil">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">cellDiffzStencil</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.cellDiffzStencil" title="Permalink to this definition">¶</a></dt>
<dd><p>cell centered difference stencil (no cell lengths include) in the
y-direction</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>differencing matrix for active cells in the y-direction</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.dim">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dim</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.dim" title="Permalink to this definition">¶</a></dt>
<dd><p>dimension of regularization mesh (1D, 2D, 3D)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dimension</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.faceDiffx">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">faceDiffx</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.faceDiffx" title="Permalink to this definition">¶</a></dt>
<dd><p>x-face differences</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>differencing matrix for active faces in the x-direction</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.faceDiffy">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">faceDiffy</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.faceDiffy" title="Permalink to this definition">¶</a></dt>
<dd><p>y-face differences</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>differencing matrix for active faces in the y-direction</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.faceDiffz">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">faceDiffz</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.faceDiffz" title="Permalink to this definition">¶</a></dt>
<dd><p>z-face differences</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>differencing matrix for active faces in the z-direction</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.indActive">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">indActive</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.indActive" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): active indices in mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.nC">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">nC</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.nC" title="Permalink to this definition">¶</a></dt>
<dd><p>reduced number of cells</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of cells being regularized</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.regularization_type">
<span class="sig-name descname"><span class="pre">regularization_type</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.regularization_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.RegularizationMesh.vol">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">vol</span></span><a class="headerlink" href="#SimPEG.regularization.RegularizationMesh.vol" title="Permalink to this definition">¶</a></dt>
<dd><p>reduced volume vector</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.21)">numpy.ndarray</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>reduced cell volume</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.BaseRegularization">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">BaseRegularization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/base.py#L19-L188"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.BaseRegularization" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Base class for regularization. Inherit this for building your own
regularization. The base regularization assumes a weighted l2 style of
regularization. However, if you wish to employ a different norm, the
methods <code class="xref py py-meth docutils literal notranslate"><span class="pre">__call__()</span></code>, <a class="reference internal" href="#SimPEG.regularization.BaseRegularization.deriv" title="SimPEG.regularization.BaseRegularization.deriv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">deriv()</span></code></a> and <a class="reference internal" href="#SimPEG.regularization.BaseRegularization.deriv2" title="SimPEG.regularization.BaseRegularization.deriv2"><code class="xref py py-meth docutils literal notranslate"><span class="pre">deriv2()</span></code></a> can be
over-written</p>
<dl class="field-list simple">
<dt class="field-odd">param discretize.base.BaseMesh mesh</dt>
<dd class="field-odd"><p>SimPEG mesh</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
</ul>
<dl class="py attribute">
<dt class="sig sig-object py" id="SimPEG.regularization.BaseRegularization.counter">
<span class="sig-name descname"><span class="pre">counter</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#SimPEG.regularization.BaseRegularization.counter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.BaseRegularization.mref">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">mref</span></span><a class="headerlink" href="#SimPEG.regularization.BaseRegularization.mref" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.BaseRegularization.indActive">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">indActive</span></span><a class="headerlink" href="#SimPEG.regularization.BaseRegularization.indActive" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.BaseRegularization.cell_weights">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">cell_weights</span></span><a class="headerlink" href="#SimPEG.regularization.BaseRegularization.cell_weights" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.BaseRegularization.regmesh">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">regmesh</span></span><a class="headerlink" href="#SimPEG.regularization.BaseRegularization.regmesh" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.BaseRegularization.mapping">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">mapping</span></span><a class="headerlink" href="#SimPEG.regularization.BaseRegularization.mapping" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.BaseRegularization.nP">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">nP</span></span><a class="headerlink" href="#SimPEG.regularization.BaseRegularization.nP" title="Permalink to this definition">¶</a></dt>
<dd><p>number of model parameters</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="SimPEG.regularization.BaseRegularization.deriv">
<span class="sig-name descname"><span class="pre">deriv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/base.py#L136-L157"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.BaseRegularization.deriv" title="Permalink to this definition">¶</a></dt>
<dd><p>The regularization is:</p>
<div class="math notranslate nohighlight">
\[R(m) = \frac{1}{2}\mathbf{(m-m_\text{ref})^\top W^\top
       W(m-m_\text{ref})}\]</div>
<p>So the derivative is straight forward:</p>
<div class="math notranslate nohighlight">
\[R(m) = \mathbf{W^\top W (m-m_\text{ref})}\]</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="SimPEG.regularization.BaseRegularization.deriv2">
<span class="sig-name descname"><span class="pre">deriv2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/base.py#L159-L188"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.BaseRegularization.deriv2" title="Permalink to this definition">¶</a></dt>
<dd><p>Second derivative</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>m</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.21)"><em>numpy.ndarray</em></a>) – geophysical model</p></li>
<li><p><strong>v</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.21)"><em>numpy.ndarray</em></a>) – vector to multiply</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="(in SciPy v1.7.1)">scipy.sparse.csr_matrix</a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>WtW, or if v is supplied WtW*v (numpy.ndarray)</p>
</dd>
</dl>
<p>The regularization is:</p>
<div class="math notranslate nohighlight">
\[R(m) = \frac{1}{2}\mathbf{(m-m_\text{ref})^\top W^\top
W(m-m_\text{ref})}\]</div>
<p>So the second derivative is straight forward:</p>
<div class="math notranslate nohighlight">
\[R(m) = \mathbf{W^\top W}\]</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.BaseComboRegularization">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">BaseComboRegularization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/base.py#L351-L385"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.BaseComboRegularization" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>alpha_s</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): smallness weight, a float, Zero or Identity</p></li>
<li><p><strong>alpha_x</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first x-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_xx</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second x-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_y</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first y-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_yy</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second y-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_z</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first z-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_zz</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second z-derivative, a float, Zero or Identity</p></li>
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mrefInSmooth</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): include mref in the smoothness calculation?, a boolean, Default: False</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
<li><p><strong>scale</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Float" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): function scaling applied inside the norm, a float, Default: 1.0</p></li>
</ul>
</dd></dl>

</div>
<div class="section" id="tikhonov-regularization">
<h2>Tikhonov Regularization<a class="headerlink" href="#tikhonov-regularization" title="Permalink to this headline">¶</a></h2>
<p>Here we will define regularization of a model, m, in general however, this
should be thought of as (m-m_ref) but otherwise it is exactly the same:</p>
<div class="math notranslate nohighlight">
\[R(m) = \int_\Omega \frac{\alpha_x}{2}\left(\frac{\partial m}{\partial x}\right)^2 + \frac{\alpha_y}{2}\left(\frac{\partial m}{\partial y}\right)^2 \partial v\]</div>
<p>Our discrete gradient operator works on cell centers and gives the derivative
on the cell faces, which is not where we want to be evaluating this integral.
We need to average the values back to the cell-centers before we integrate. To
avoid null spaces, we square first and then average. In 2D with ij notation it
looks like this:</p>
<div class="math notranslate nohighlight">
\[\begin{split}R(m) \approx \sum_{ij} \left[\frac{\alpha_x}{2}\left[\left(\frac{m_{i+1,j} - m_{i,j}}{h}\right)^2 + \left(\frac{m_{i,j} - m_{i-1,j}}{h}\right)^2\right] \\
+ \frac{\alpha_y}{2}\left[\left(\frac{m_{i,j+1} - m_{i,j}}{h}\right)^2 + \left(\frac{m_{i,j} - m_{i,j-1}}{h}\right)^2\right]
\right]h^2\end{split}\]</div>
<p>If we let D_1 be the derivative matrix in the x direction</p>
<div class="math notranslate nohighlight">
\[\mathbf{D}_1 = \mathbf{I}_2\otimes\mathbf{d}_1\]</div>
<div class="math notranslate nohighlight">
\[\mathbf{D}_2 = \mathbf{d}_2\otimes\mathbf{I}_1\]</div>
<p>Where d_1 is the one dimensional derivative:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\mathbf{d}_1 = \frac{1}{h} \left[ \begin{array}{cccc}
-1 &amp; 1 &amp; &amp; \\
 &amp; \ddots &amp; \ddots&amp;\\
 &amp;  &amp; -1 &amp; 1\end{array} \right]\end{split}\]</div>
<div class="math notranslate nohighlight">
\[R(m) \approx \mathbf{v}^\top \left[\frac{\alpha_x}{2}\mathbf{A}_1 (\mathbf{D}_1 m) \odot (\mathbf{D}_1 m) + \frac{\alpha_y}{2}\mathbf{A}_2 (\mathbf{D}_2 m) \odot (\mathbf{D}_2 m) \right]\]</div>
<p>Recall that this is really a just point wise multiplication, or a diagonal
matrix times a vector. When we multiply by something in a diagonal we can
interchange and it gives the same results (i.e. it is point wise)</p>
<div class="math notranslate nohighlight">
\[\mathbf{a\odot b} = \text{diag}(\mathbf{a})\mathbf{b} = \text{diag}(\mathbf{b})\mathbf{a} = \mathbf{b\odot a}\]</div>
<p>and the transpose also is true (but the sizes have to make sense…):</p>
<div class="math notranslate nohighlight">
\[\mathbf{a}^\top\text{diag}(\mathbf{b}) = \mathbf{b}^\top\text{diag}(\mathbf{a})\]</div>
<p>So R(m) can simplify to:</p>
<div class="math notranslate nohighlight">
\[R(m) \approx  \mathbf{m}^\top \left[\frac{\alpha_x}{2}\mathbf{D}_1^\top \text{diag}(\mathbf{A}_1^\top\mathbf{v}) \mathbf{D}_1 +  \frac{\alpha_y}{2}\mathbf{D}_2^\top \text{diag}(\mathbf{A}_2^\top \mathbf{v}) \mathbf{D}_2 \right] \mathbf{m}\]</div>
<p>We will define W_x as:</p>
<div class="math notranslate nohighlight">
\[\mathbf{W}_x = \sqrt{\alpha_x}\text{diag}\left(\sqrt{\mathbf{A}_1^\top\mathbf{v}}\right) \mathbf{D}_1\]</div>
<p>And then W as a tall matrix of all of the different regularization terms:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\mathbf{W} = \left[ \begin{array}{c}
\mathbf{W}_s\\
\mathbf{W}_x\\
\mathbf{W}_y\end{array} \right]\end{split}\]</div>
<p>Then we can write</p>
<div class="math notranslate nohighlight">
\[R(m) \approx \frac{1}{2}\mathbf{m^\top W^\top W m}\]</div>
<div class="section" id="id1">
<h3>The API<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.Tikhonov">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">Tikhonov</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/tikhonov.py#L402-L472"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.Tikhonov" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>L2 Tikhonov regularization with both smallness and smoothness (first order
derivative) contributions.</p>
<div class="math notranslate nohighlight">
\[\phi_m(\mathbf{m}) = \alpha_s \| W_s (\mathbf{m} - \mathbf{m_{ref}} ) \|^2
+ \alpha_x \| W_x \frac{\partial}{\partial x} (\mathbf{m} - \mathbf{m_{ref}} ) \|^2
+ \alpha_y \| W_y \frac{\partial}{\partial y} (\mathbf{m} - \mathbf{m_{ref}} ) \|^2
+ \alpha_z \| W_z \frac{\partial}{\partial z} (\mathbf{m} - \mathbf{m_{ref}} ) \|^2\]</div>
<p>Note if the key word argument <cite>mrefInSmooth</cite> is False, then mref is not
included in the smoothness contribution.</p>
<dl class="field-list simple">
<dt class="field-odd">param discretize.base.BaseMesh mesh</dt>
<dd class="field-odd"><p>SimPEG mesh</p>
</dd>
<dt class="field-even">param IdentityMap mapping</dt>
<dd class="field-even"><p>regularization mapping, takes the model from model space to the thing you want to regularize</p>
</dd>
<dt class="field-odd">param numpy.ndarray indActive</dt>
<dd class="field-odd"><p>active cell indices for reducing the size of differential operators in the definition of a regularization mesh</p>
</dd>
<dt class="field-even">param bool mrefInSmooth</dt>
<dd class="field-even"><p>(default = False) put mref in the smoothness component?</p>
</dd>
<dt class="field-odd">param float alpha_s</dt>
<dd class="field-odd"><p>(default 1e-6) smallness weight</p>
</dd>
<dt class="field-even">param float alpha_x</dt>
<dd class="field-even"><p>(default 1) smoothness weight for first derivative in the x-direction</p>
</dd>
<dt class="field-odd">param float alpha_y</dt>
<dd class="field-odd"><p>(default 1) smoothness weight for first derivative in the y-direction</p>
</dd>
<dt class="field-even">param float alpha_z</dt>
<dd class="field-even"><p>(default 1) smoothness weight for first derivative in the z-direction</p>
</dd>
<dt class="field-odd">param float alpha_xx</dt>
<dd class="field-odd"><p>(default 1) smoothness weight for second derivative in the x-direction</p>
</dd>
<dt class="field-even">param float alpha_yy</dt>
<dd class="field-even"><p>(default 1) smoothness weight for second derivative in the y-direction</p>
</dd>
<dt class="field-odd">param float alpha_zz</dt>
<dd class="field-odd"><p>(default 1) smoothness weight for second derivative in the z-direction</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>alpha_s</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): smallness weight, a float, Zero or Identity</p></li>
<li><p><strong>alpha_x</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first x-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_xx</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second x-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_y</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first y-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_yy</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second y-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_z</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first z-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_zz</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second z-derivative, a float, Zero or Identity</p></li>
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mrefInSmooth</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): include mref in the smoothness calculation?, a boolean, Default: False</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
<li><p><strong>scale</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Float" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): function scaling applied inside the norm, a float, Default: 1.0</p></li>
</ul>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.Small">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">Small</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/tikhonov.py#L229-L270"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.Small" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Small regularization - L2 regularization on the difference between a
model and a reference model. Cell weights may be included. A volume
contribution is included</p>
<div class="math notranslate nohighlight">
\[r(m) = \frac{1}{2}(\mathbf{m} - \mathbf{m_ref})^        op \mathbf{W}^T
\mathbf{W} (\mathbf{m} - \mathbf{m_{ref}})\]</div>
<p>where <span class="math notranslate nohighlight">\(\mathbf{m}\)</span> is the model, <span class="math notranslate nohighlight">\(\mathbf{m_{ref}}\)</span> is a
reference model and <span class="math notranslate nohighlight">\(\mathbf{W}\)</span> is a weighting
matrix (default <code class="code docutils literal notranslate"><span class="pre">diag(np.sqrt(vol))</span></code>. If cell weights are provided, then it is
<code class="code docutils literal notranslate"><span class="pre">diag(np.sqrt(vol</span> <span class="pre">*</span> <span class="pre">cell_weights))</span></code>)</p>
<p><strong>Optional Inputs</strong></p>
<dl class="field-list simple">
<dt class="field-odd">param discretize.base.BaseMesh mesh</dt>
<dd class="field-odd"><p>SimPEG mesh</p>
</dd>
<dt class="field-even">param int nP</dt>
<dd class="field-even"><p>number of parameters</p>
</dd>
<dt class="field-odd">param IdentityMap mapping</dt>
<dd class="field-odd"><p>regularization mapping, takes the model from model space to the space you want to regularize in</p>
</dd>
<dt class="field-even">param numpy.ndarray mref</dt>
<dd class="field-even"><p>reference model</p>
</dd>
<dt class="field-odd">param numpy.ndarray indActive</dt>
<dd class="field-odd"><p>active cell indices for reducing the size of differential operators in the definition of a regularization mesh</p>
</dd>
<dt class="field-even">param numpy.ndarray cell_weights</dt>
<dd class="field-even"><p>cell weights</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
</ul>
<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.Small.W">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">W</span></span><a class="headerlink" href="#SimPEG.regularization.Small.W" title="Permalink to this definition">¶</a></dt>
<dd><p>Weighting matrix</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.SmoothDeriv">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">SmoothDeriv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/tikhonov.py#L273-L337"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.SmoothDeriv" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Base Smooth Regularization. This base class regularizes on the first
spatial derivative in the provided orientation</p>
<p><strong>Optional Inputs</strong></p>
<dl class="field-list simple">
<dt class="field-odd">param discretize.base.BaseMesh mesh</dt>
<dd class="field-odd"><p>SimPEG mesh</p>
</dd>
<dt class="field-even">param int nP</dt>
<dd class="field-even"><p>number of parameters</p>
</dd>
<dt class="field-odd">param IdentityMap mapping</dt>
<dd class="field-odd"><p>regularization mapping, takes the model from model space to the space you want to regularize in</p>
</dd>
<dt class="field-even">param numpy.ndarray mref</dt>
<dd class="field-even"><p>reference model</p>
</dd>
<dt class="field-odd">param numpy.ndarray indActive</dt>
<dd class="field-odd"><p>active cell indices for reducing the size of differential operators in the definition of a regularization mesh</p>
</dd>
<dt class="field-even">param numpy.ndarray cell_weights</dt>
<dd class="field-even"><p>cell weights</p>
</dd>
<dt class="field-odd">param bool mrefInSmooth</dt>
<dd class="field-odd"><p>include the reference model in the smoothness computation? (eg. look at Deriv of m (False) or Deriv of (m-mref) (True))</p>
</dd>
<dt class="field-even">param numpy.ndarray cell_weights</dt>
<dd class="field-even"><p>vector of cell weights (applied in all terms)</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mrefInSmooth</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): include mref in the smoothness calculation?, a boolean, Default: False</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
</ul>
<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SmoothDeriv.mrefInSmooth">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">mrefInSmooth</span></span><a class="headerlink" href="#SimPEG.regularization.SmoothDeriv.mrefInSmooth" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>mrefInSmooth</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): include mref in the smoothness calculation?, a boolean, Default: False</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SmoothDeriv.W">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">W</span></span><a class="headerlink" href="#SimPEG.regularization.SmoothDeriv.W" title="Permalink to this definition">¶</a></dt>
<dd><p>Weighting matrix that constructs the first spatial derivative stencil
in the specified orientation</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.SmoothDeriv2">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">SmoothDeriv2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/tikhonov.py#L340-L399"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.SmoothDeriv2" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Base Smooth Regularization. This base class regularizes on the second
spatial derivative in the provided orientation</p>
<p><strong>Optional Inputs</strong></p>
<dl class="field-list simple">
<dt class="field-odd">param discretize.base.BaseMesh mesh</dt>
<dd class="field-odd"><p>SimPEG mesh</p>
</dd>
<dt class="field-even">param int nP</dt>
<dd class="field-even"><p>number of parameters</p>
</dd>
<dt class="field-odd">param IdentityMap mapping</dt>
<dd class="field-odd"><p>regularization mapping, takes the model from model space to the space you want to regularize in</p>
</dd>
<dt class="field-even">param numpy.ndarray mref</dt>
<dd class="field-even"><p>reference model</p>
</dd>
<dt class="field-odd">param numpy.ndarray indActive</dt>
<dd class="field-odd"><p>active cell indices for reducing the size of differential operators in the definition of a regularization mesh</p>
</dd>
<dt class="field-even">param numpy.ndarray cell_weights</dt>
<dd class="field-even"><p>cell weights</p>
</dd>
<dt class="field-odd">param bool mrefInSmooth</dt>
<dd class="field-odd"><p>include the reference model in the smoothness computation? (eg. look at Deriv of m (False) or Deriv of (m-mref) (True))</p>
</dd>
<dt class="field-even">param numpy.ndarray cell_weights</dt>
<dd class="field-even"><p>vector of cell weights (applied in all terms)</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
</ul>
<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SmoothDeriv2.W">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">W</span></span><a class="headerlink" href="#SimPEG.regularization.SmoothDeriv2.W" title="Permalink to this definition">¶</a></dt>
<dd><p>Weighting matrix that takes the second spatial derivative in the
specified orientation</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.Simple">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">Simple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/tikhonov.py#L155-L219"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.Simple" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Simple regularization that does not include length scales in the
derivatives.</p>
<div class="math notranslate nohighlight">
\[r(\mathbf{m}) = \alpha_s \phi_s + \alpha_x \phi_x +
\alpha_y \phi_y + \alpha_z \phi_z\]</div>
<p>where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\phi_s\)</span> is a <a class="reference internal" href="#SimPEG.regularization.Small" title="SimPEG.regularization.Small"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimPEG.regularization.Small</span></code></a> instance</p></li>
<li><p><span class="math notranslate nohighlight">\(\phi_x\)</span> is a <a class="reference internal" href="#SimPEG.regularization.SimpleSmoothDeriv" title="SimPEG.regularization.SimpleSmoothDeriv"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimPEG.regularization.SimpleSmoothDeriv</span></code></a> instance, with <code class="code docutils literal notranslate"><span class="pre">orientation='x'</span></code></p></li>
<li><p><span class="math notranslate nohighlight">\(\phi_y\)</span> is a <a class="reference internal" href="#SimPEG.regularization.SimpleSmoothDeriv" title="SimPEG.regularization.SimpleSmoothDeriv"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimPEG.regularization.SimpleSmoothDeriv</span></code></a> instance, with <code class="code docutils literal notranslate"><span class="pre">orientation='y'</span></code></p></li>
<li><p><span class="math notranslate nohighlight">\(\phi_z\)</span> is a <a class="reference internal" href="#SimPEG.regularization.SimpleSmoothDeriv" title="SimPEG.regularization.SimpleSmoothDeriv"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimPEG.regularization.SimpleSmoothDeriv</span></code></a> instance, with <code class="code docutils literal notranslate"><span class="pre">orientation='z'</span></code></p></li>
</ul>
<p><strong>Required Inputs</strong></p>
<dl class="field-list simple">
<dt class="field-odd">param discretize.base.BaseMesh mesh</dt>
<dd class="field-odd"><p>a SimPEG mesh</p>
</dd>
</dl>
<p><strong>Optional Inputs</strong></p>
<dl class="field-list simple">
<dt class="field-odd">param IdentityMap mapping</dt>
<dd class="field-odd"><p>regularization mapping, takes the model from model space to the space you want to regularize in</p>
</dd>
<dt class="field-even">param numpy.ndarray mref</dt>
<dd class="field-even"><p>reference model</p>
</dd>
<dt class="field-odd">param numpy.ndarray indActive</dt>
<dd class="field-odd"><p>active cell indices for reducing the size of differential operators in the definition of a regularization mesh</p>
</dd>
<dt class="field-even">param numpy.ndarray cell_weights</dt>
<dd class="field-even"><p>cell weights</p>
</dd>
<dt class="field-odd">param bool mrefInSmooth</dt>
<dd class="field-odd"><p>include the reference model in the smoothness computation? (eg. look at Deriv of m (False) or Deriv of (m-mref) (True))</p>
</dd>
<dt class="field-even">param numpy.ndarray cell_weights</dt>
<dd class="field-even"><p>vector of cell weights (applied in all terms)</p>
</dd>
</dl>
<p><strong>Weighting Parameters</strong></p>
<dl class="field-list simple">
<dt class="field-odd">param float alpha_s</dt>
<dd class="field-odd"><p>weighting on the smallness (default 1.)</p>
</dd>
<dt class="field-even">param float alpha_x</dt>
<dd class="field-even"><p>weighting on the x-smoothness (default 1.)</p>
</dd>
<dt class="field-odd">param float alpha_y</dt>
<dd class="field-odd"><p>weighting on the y-smoothness (default 1.)</p>
</dd>
<dt class="field-even">param float alpha_z</dt>
<dd class="field-even"><p>weighting on the z-smoothness(default 1.)</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>alpha_s</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): smallness weight, a float, Zero or Identity</p></li>
<li><p><strong>alpha_x</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first x-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_xx</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second x-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_y</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first y-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_yy</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second y-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_z</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first z-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_zz</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second z-derivative, a float, Zero or Identity</p></li>
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mrefInSmooth</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): include mref in the smoothness calculation?, a boolean, Default: False</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
<li><p><strong>scale</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Float" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): function scaling applied inside the norm, a float, Default: 1.0</p></li>
</ul>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.SimpleSmall">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">SimpleSmall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/tikhonov.py#L17-L61"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.SimpleSmall" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Simple Small regularization - L2 regularization on the difference between a
model and a reference model. Cell weights may be included. This does not
include a volume contribution.</p>
<div class="math notranslate nohighlight">
\[r(m) = \frac{1}{2}(\mathbf{m} - \mathbf{m_ref})^        op \mathbf{W}^T
\mathbf{W} (\mathbf{m} - \mathbf{m_{ref}})\]</div>
<p>where <span class="math notranslate nohighlight">\(\mathbf{m}\)</span> is the model, <span class="math notranslate nohighlight">\(\mathbf{m_{ref}}\)</span> is a
reference model and <span class="math notranslate nohighlight">\(\mathbf{W}\)</span> is a weighting
matrix (default Identity). If cell weights are provided, then it is
<code class="code docutils literal notranslate"><span class="pre">diag(np.sqrt(cell_weights))</span></code>)</p>
<p><strong>Optional Inputs</strong></p>
<dl class="field-list simple">
<dt class="field-odd">param discretize.base.BaseMesh mesh</dt>
<dd class="field-odd"><p>SimPEG mesh</p>
</dd>
<dt class="field-even">param int nP</dt>
<dd class="field-even"><p>number of parameters</p>
</dd>
<dt class="field-odd">param IdentityMap mapping</dt>
<dd class="field-odd"><p>regularization mapping, takes the model from model space to the space you want to regularize in</p>
</dd>
<dt class="field-even">param numpy.ndarray mref</dt>
<dd class="field-even"><p>reference model</p>
</dd>
<dt class="field-odd">param numpy.ndarray indActive</dt>
<dd class="field-odd"><p>active cell indices for reducing the size of differential operators in the definition of a regularization mesh</p>
</dd>
<dt class="field-even">param numpy.ndarray cell_weights</dt>
<dd class="field-even"><p>cell weights</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
</ul>
<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SimpleSmall.W">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">W</span></span><a class="headerlink" href="#SimPEG.regularization.SimpleSmall.W" title="Permalink to this definition">¶</a></dt>
<dd><p>Weighting matrix</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.SimpleSmoothDeriv">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">SimpleSmoothDeriv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/tikhonov.py#L64-L152"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.SimpleSmoothDeriv" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Base Simple Smooth Regularization. This base class regularizes on the first
spatial derivative, not considering length scales, in the provided
orientation</p>
<p><strong>Optional Inputs</strong></p>
<dl class="field-list simple">
<dt class="field-odd">param discretize.base.BaseMesh mesh</dt>
<dd class="field-odd"><p>SimPEG mesh</p>
</dd>
<dt class="field-even">param int nP</dt>
<dd class="field-even"><p>number of parameters</p>
</dd>
<dt class="field-odd">param IdentityMap mapping</dt>
<dd class="field-odd"><p>regularization mapping, takes the model from model space to the space you want to regularize in</p>
</dd>
<dt class="field-even">param numpy.ndarray mref</dt>
<dd class="field-even"><p>reference model</p>
</dd>
<dt class="field-odd">param numpy.ndarray indActive</dt>
<dd class="field-odd"><p>active cell indices for reducing the size of differential operators in the definition of a regularization mesh</p>
</dd>
<dt class="field-even">param numpy.ndarray cell_weights</dt>
<dd class="field-even"><p>cell weights</p>
</dd>
<dt class="field-odd">param bool mrefInSmooth</dt>
<dd class="field-odd"><p>include the reference model in the smoothness computation? (eg. look at Deriv of m (False) or Deriv of (m-mref) (True))</p>
</dd>
<dt class="field-even">param numpy.ndarray cell_weights</dt>
<dd class="field-even"><p>vector of cell weights (applied in all terms)</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mrefInSmooth</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): include mref in the smoothness calculation?, a boolean, Default: False</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
</ul>
<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SimpleSmoothDeriv.mrefInSmooth">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">mrefInSmooth</span></span><a class="headerlink" href="#SimPEG.regularization.SimpleSmoothDeriv.mrefInSmooth" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>mrefInSmooth</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): include mref in the smoothness calculation?, a boolean, Default: False</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SimpleSmoothDeriv.W">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">W</span></span><a class="headerlink" href="#SimPEG.regularization.SimpleSmoothDeriv.W" title="Permalink to this definition">¶</a></dt>
<dd><p>Weighting matrix that takes the first spatial difference
with normalized length scales in the specified orientation</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SimpleSmoothDeriv.length_scales">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">length_scales</span></span><a class="headerlink" href="#SimPEG.regularization.SimpleSmoothDeriv.length_scales" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalized cell based weighting</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="sparse-regularization">
<h2>Sparse Regularization<a class="headerlink" href="#sparse-regularization" title="Permalink to this headline">¶</a></h2>
<p>We have also implemented several sparse regularizations with a variable norm.</p>
<div class="section" id="id2">
<h3>The API<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.Sparse">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">Sparse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/sparse.py#L403-L556"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.Sparse" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>The regularization is:</p>
<div class="math notranslate nohighlight">
\[R(m) = \frac{1}{2}\mathbf{(m-m_\text{ref})^\top W^\top R^\top R
W(m-m_\text{ref})}\]</div>
<p>where the IRLS weight</p>
<div class="math notranslate nohighlight">
\[R = \eta TO FINISH LATER!!!\]</div>
<p>So the derivative is straight forward:</p>
<div class="math notranslate nohighlight">
\[R(m) = \mathbf{W^\top R^\top R W (m-m_\text{ref})}\]</div>
<p>The IRLS weights are recomputed after each beta solves.
It is strongly recommended to do a few Gauss-Newton iterations
before updating.</p>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>alpha_s</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): smallness weight, a float, Zero or Identity</p></li>
<li><p><strong>alpha_x</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first x-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_xx</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second x-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_y</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first y-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_yy</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second y-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_z</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the first z-derivative, a float, Zero or Identity</p></li>
<li><p><strong>alpha_zz</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Float" title="SimPEG.props.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): weight for the second z-derivative, a float, Zero or Identity</p></li>
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>eps_p</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Float" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): Threshold value for the model norm, a float</p></li>
<li><p><strong>eps_q</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Float" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): Threshold value for the model gradient norm, a float</p></li>
<li><p><strong>gradientType</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.String" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a>): type of gradient, a unicode string, Default: components</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>model</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): current model, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mrefInSmooth</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): include mref in the smoothness calculation?, a boolean, Default: False</p></li>
<li><p><strong>norms</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): Norms used to create the sparse regularization, a list or numpy array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*, *), Default: [[2. 2. 2. 2.]]</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
<li><p><strong>scale</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Float" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): function scaling applied inside the norm, a float, Default: 1.0</p></li>
<li><p><strong>scaledIRLS</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): Scale the gradients of the IRLS norms, a boolean, Default: True</p></li>
<li><p><strong>scales</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): General nob for scaling, a list or numpy array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*, *), Default: [[1. 1. 1. 1.]]</p></li>
<li><p><strong>space</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.String" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a>): type of model, a unicode string, Default: linear</p></li>
</ul>
<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.Sparse.norms">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">norms</span></span><a class="headerlink" href="#SimPEG.regularization.Sparse.norms" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>norms</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): Norms used to create the sparse regularization, a list or numpy array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*, *), Default: [[2. 2. 2. 2.]]</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.Sparse.eps_p">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">eps_p</span></span><a class="headerlink" href="#SimPEG.regularization.Sparse.eps_p" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>eps_p</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Float" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): Threshold value for the model norm, a float</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.Sparse.eps_q">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">eps_q</span></span><a class="headerlink" href="#SimPEG.regularization.Sparse.eps_q" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>eps_q</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Float" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): Threshold value for the model gradient norm, a float</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.Sparse.model">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">model</span></span><a class="headerlink" href="#SimPEG.regularization.Sparse.model" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>model</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): current model, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.Sparse.space">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">space</span></span><a class="headerlink" href="#SimPEG.regularization.Sparse.space" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>space</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.String" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a>): type of model, a unicode string, Default: linear</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.Sparse.gradientType">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">gradientType</span></span><a class="headerlink" href="#SimPEG.regularization.Sparse.gradientType" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>gradientType</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.String" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a>): type of gradient, a unicode string, Default: components</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.Sparse.scales">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">scales</span></span><a class="headerlink" href="#SimPEG.regularization.Sparse.scales" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>scales</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): General nob for scaling, a list or numpy array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*, *), Default: [[1. 1. 1. 1.]]</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.Sparse.scaledIRLS">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">scaledIRLS</span></span><a class="headerlink" href="#SimPEG.regularization.Sparse.scaledIRLS" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>scaledIRLS</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): Scale the gradients of the IRLS norms, a boolean, Default: True</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="SimPEG.regularization.Sparse.l2model">
<span class="sig-name descname"><span class="pre">l2model</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#SimPEG.regularization.Sparse.l2model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseSmall">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">SparseSmall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/sparse.py#L56-L145"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.SparseSmall" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Sparse smallness regularization</p>
<p><strong>Inputs</strong></p>
<dl class="field-list simple">
<dt class="field-odd">param int norm</dt>
<dd class="field-odd"><p>norm on the smallness</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>epsilon</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Float" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): Threshold value for the model norm, a float, Default: 0.001</p></li>
<li><p><strong>gradientType</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.String" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a>): type of gradient, a unicode string, Default: components</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>model</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): current model, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>norm</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): norm used, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
<li><p><strong>scale</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): General nob for scaling, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>scaledIRLS</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): Scale the gradients of the IRLS norms, a boolean, Default: True</p></li>
<li><p><strong>space</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.String" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a>): By default inherit the objctive, a unicode string, Default: linear</p></li>
</ul>
<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseSmall.scaledIRLS">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">scaledIRLS</span></span><a class="headerlink" href="#SimPEG.regularization.SparseSmall.scaledIRLS" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>scaledIRLS</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): Scale the gradients of the IRLS norms, a boolean, Default: True</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseSmall.f_m">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">f_m</span></span><a class="headerlink" href="#SimPEG.regularization.SparseSmall.f_m" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseSmall.W">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">W</span></span><a class="headerlink" href="#SimPEG.regularization.SparseSmall.W" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseSmall.R">
<span class="sig-name descname"><span class="pre">R</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f_m</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/sparse.py#L95-L122"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.SparseSmall.R" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseSmall.deriv">
<span class="sig-name descname"><span class="pre">deriv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/sparse.py#L124-L145"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.SparseSmall.deriv" title="Permalink to this definition">¶</a></dt>
<dd><p>The regularization is:</p>
<div class="math notranslate nohighlight">
\[R(m) = \frac{1}{2}\mathbf{(m-m_\text{ref})^\top W^\top
       W(m-m_\text{ref})}\]</div>
<p>So the derivative is straight forward:</p>
<div class="math notranslate nohighlight">
\[R(m) = \mathbf{W^\top W (m-m_\text{ref})}\]</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseDeriv">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">SimPEG.regularization.</span></span><span class="sig-name descname"><span class="pre">SparseDeriv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/sparse.py#L148-L400"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.SparseDeriv" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Base Class for sparse regularization on first spatial derivatives</p>
</div></blockquote>
<p><strong>Required Properties:</strong></p>
<ul class="simple">
<li><p><strong>cell_weights</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): regularization weights applied at cell centers, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>epsilon</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Float" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>): Threshold value for the model norm, a float, Default: 0.001</p></li>
<li><p><strong>gradientType</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.String" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a>): type of gradient, a unicode string, Default: components</p></li>
<li><p><strong>indActive</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): indices of active cells in the mesh, a list or numpy array of &lt;class ‘bool’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mapping</strong> (<a class="reference internal" href="api_Maps.html#SimPEG.maps.IdentityMap" title="SimPEG.maps.IdentityMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">IdentityMap</span></code></a>): mapping which is applied to model in the regularization, an instance of IdentityMap, Default: IdentityMap(<em>,</em>)</p></li>
<li><p><strong>model</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): current model, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>mref</strong> (<a class="reference internal" href="api_Props.html#SimPEG.props.Array" title="SimPEG.props.Array"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): reference model, a numpy, Zero or Identity array of &lt;class ‘float’&gt;, &lt;class ‘int’&gt; with shape (*)</p></li>
<li><p><strong>mrefInSmooth</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): include mref in the smoothness calculation?, a boolean, Default: False</p></li>
<li><p><strong>norm</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): norm used, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>regmesh</strong> (<a class="reference internal" href="#SimPEG.regularization.RegularizationMesh" title="SimPEG.regularization.RegularizationMesh"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegularizationMesh</span></code></a>): regularization mesh, an instance of RegularizationMesh</p></li>
<li><p><strong>scale</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/math.html#properties.Array" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Array</span></code></a>): General nob for scaling, a list or numpy array of &lt;class ‘float’&gt; with shape (*)</p></li>
<li><p><strong>scaledIRLS</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): Scale the gradients of the IRLS norms, a boolean, Default: True</p></li>
<li><p><strong>space</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.String" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a>): By default inherit the objctive, a unicode string, Default: linear</p></li>
</ul>
<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseDeriv.mrefInSmooth">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">mrefInSmooth</span></span><a class="headerlink" href="#SimPEG.regularization.SparseDeriv.mrefInSmooth" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>mrefInSmooth</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): include mref in the smoothness calculation?, a boolean, Default: False</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseDeriv.scaledIRLS">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">scaledIRLS</span></span><a class="headerlink" href="#SimPEG.regularization.SparseDeriv.scaledIRLS" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>scaledIRLS</strong> (<a class="reference external" href="https://propertiespy.readthedocs.io/en/latest/content/primitive.html#properties.Boolean" title="(in properties v0.5.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Boolean</span></code></a>): Scale the gradients of the IRLS norms, a boolean, Default: True</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseDeriv.R">
<span class="sig-name descname"><span class="pre">R</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f_m</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/sparse.py#L207-L238"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.SparseDeriv.R" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseDeriv.deriv">
<span class="sig-name descname"><span class="pre">deriv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/simpeg/simpeg/blob/main/SimPEG/regularization/sparse.py#L240-L293"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SimPEG.regularization.SparseDeriv.deriv" title="Permalink to this definition">¶</a></dt>
<dd><p>The regularization is:</p>
<div class="math notranslate nohighlight">
\[R(m) = \frac{1}{2}\mathbf{(m-m_\text{ref})^\top W^\top
       W(m-m_\text{ref})}\]</div>
<p>So the derivative is straight forward:</p>
<div class="math notranslate nohighlight">
\[R(m) = \mathbf{W^\top W (m-m_\text{ref})}\]</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseDeriv.f_m">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">f_m</span></span><a class="headerlink" href="#SimPEG.regularization.SparseDeriv.f_m" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseDeriv.cellDiffStencil">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">cellDiffStencil</span></span><a class="headerlink" href="#SimPEG.regularization.SparseDeriv.cellDiffStencil" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseDeriv.W">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">W</span></span><a class="headerlink" href="#SimPEG.regularization.SparseDeriv.W" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="SimPEG.regularization.SparseDeriv.length_scales">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">length_scales</span></span><a class="headerlink" href="#SimPEG.regularization.SparseDeriv.length_scales" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalized cell based weighting</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="api_Optimization.html" class="btn btn-neutral float-right" title="Optimize" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="api_DataMisfit.html" class="btn btn-neutral float-left" title="Data Misfit" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>

 


    <div id="disqus_thread"></div>
    <script>

    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

    var disqus_config = function () {
    this.page.url = {path};  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = {path}; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };

    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://simpeg.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


    <div role="contentinfo">
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/" width="60px"; style="float:right;height:3em;line-height:3em;padding:10px 0 0 1em;">
            <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
        </a>
        2013-2018,
        <a href="http://simpeg.xyz">SimPEG Developers.</a><br />
        Except where noted, this work is licensed under a <br />
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
            Creative Commons Attribution 4.0 International License
        </a>
    </div>
    <br>
    <div>
    Built with
        <a href="http://sphinx-doc.org/">Sphinx</a>
        using a
        <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>
        provided by
        <a href="https://readthedocs.org">Read the Docs</a>.
     </div>


</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>